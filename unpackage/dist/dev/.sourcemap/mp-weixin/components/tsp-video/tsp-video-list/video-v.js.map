{"version":3,"sources":[null,"webpack:///F:/前端/new/短视频模板 - 副本/components/tsp-video/tsp-video-list/video-v.vue?a886","webpack:///F:/前端/new/短视频模板 - 副本/components/tsp-video/tsp-video-list/video-v.vue?c92e","webpack:///F:/前端/new/短视频模板 - 副本/components/tsp-video/tsp-video-list/video-v.vue?b5a3","uni-app:///components/tsp-video/tsp-video-list/video-v.vue","webpack:///F:/前端/new/短视频模板 - 副本/components/tsp-video/tsp-video-list/video-v.vue?ca68","webpack:///F:/前端/new/短视频模板 - 副本/components/tsp-video/tsp-video-list/video-v.vue?d76f"],"names":["components","videoMenu","props","loadOpen","type","default","tabBarShow","tabBarHeight","speedBottom","autoplay","loopPlay","nextPlay","totalvod","doubleOpen","doubleHeart","swId","showBarHeight","data","videoStyle","screenWidth","screenHeight","videoCtx","vodIndex","currentIndex","contentShow","loadShow","autoplayVideo","vodList","totalPlayList","finalList","changeIndex","beforeVodInfo","vodCurIndex","circular","durationNum","showShade","openSpot","shadeNum","bufferTime","sliderProgress","sliderTime","videoTime","endTime","sliderDrag","brightSlider","sliderEndTime","bufferNum","bufferShow","playOpen","failTime","repeatTime","palyCartoon","shakePlay","touchClientY","moveClientY","moveOpacity","refreshShow","refreshOpacity","refreshclientY","refreshOpen","playErrTime","interceptIndex","loadTime","beginLoad","loadStart","muteSetup","lastTapDiffTime","lastTapTimeoutFunc","likeList","likeId","doubleOutTime","clearDoubleTime","tailPlay","created","watch","item","uni","methods","initVod","dataList","scrollToVod","getPlayVod","setTimeout","resultList","playIndex","endNum","arrList","currentNum","clearTimeout","setSliceList","resData","lodingData","appendNum","length","refreshSquare","muteVideo","showPlay","hidePause","playSpot","videoPlay","videoPause","changeSwiper","swiperVod","againLocatePlay","getVodInfo","getVodSliceList","swiperPlay","clearInterval","startPlay","bufferVod","vodPaly","errVod","timeupdateVod","scheduleLoad","vodLoad","endedVod","formatSeconds","touchmoveSlider","touchendSlider","vodViewStart","vodViewMove","vodViewEnd","resetData","handClick","id","width","height","top","left","rotate","className","isShow","pxToRpx","doubleAddClass","longpress","addVodData","currNum","removeVodData","newList","currExist","getFilterData","console","handleInfo"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;AACa;;;AAGnE;AACyK;AACzK,gBAAgB,+KAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClDA;AAAA;AAAA;AAAA;AAAqnB,CAAgB,2nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;ACiIzoB;AACA;AACA;AACA;AAHA,eAIA;EACAA;IACAC;EACA;EACAC;IACA;IACAC;MACAC;MACAC;IACA;IACA;IACAC;MACAF;MACAC;IACA;IACA;IACAE;MACAH;MACAC;IACA;IACA;IACAG;MACAJ;MACAC;IACA;IACA;IACAI;MACAL;MACAC;IACA;IACA;IACAK;MACAN;MACAC;IACA;IACA;IACAM;MACAP;MACAC;IACA;IACA;IACAO;MACAR;MACAC;IACA;IACA;IACAQ;MACAT;MACAC;IACA;IACA;IACAS;MACAV;MACAC;IACA;IACA;IACAU;MACAX;MACAC;IACA;IACA;IACAW;MACAZ;MACAC;IACA;EACA;EACAY;IACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MAAA;MACA;MACAC;QACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MAbA,CAcA;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;MAAA;MACA;IACA;MACA;IACA;EACA;EACAC;IACA1C;MAAA;MACA;MACA;QACA;QACA;UACA;YACA2C;YACAA;YACAA;YACAA;YACAC;UACA;QACA;MACA;IACA;EACA;EACAC;IACA,YACAC;MACA;MACA;QACA;MACA;MACA;MACA;MACAC;QACAJ;QACAA;QACAA;QACAA;QACAA;MACA;;MACAI;QACA;MACA;MACA;MACA;MACA;MACA;QACA;MACA;QACA;MACA;MACA;IACA;IACA,gBACAC;MACA;MACA;IACA;IACA,cACAC;MAAA;MACA;MACA;MACAC;QACA;UACA;UACA;UACA;UACA;UACA;UAEA;YACA;YACA;YACA;cACAC,2EACAC;YACA;cACAD,8EACAE;YACA;YACA;YACA;YACA;cACA;cACAC;gBACA;cACA;cACA;gBACA;cACA;YACA;UACA;YACA;YACA;YACA;UACA;QACA;UACA;QACA;;QACA;QACA;UACA;YACAC;UACA;QACA;QACA;QACA,sGACA3D;UACA;UACA4D;UACA;YACA;YACA;cACA;cACA;YACA;YACA;UACA;QACA;QACA;UAAA;UACA;QACA;QACA;QACA;MACA;MACAN;QACA;QACA;UACA;YACA;UACA;YACA;YACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA,aACAO;MAAA;MACAC;QACA;UACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA,YACAC;MAAA;MACA;MACA;MACAZ;QACAJ;QACAA;QACAA;QACAA;QACAA;MACA;;MACA;MACA;QACA;QACA;QACAO;UACA;UACA;YACA;cACA;gBACA;cACA;gBACA;cACA;gBACA;cACA;YACA;UACA;UACA;UACA;UACA,uFACAU;YACA,sFACAC;YACAP;cACA;YACA;UACA;UACA;YACA;UACA;UACA;YACA;YACA;UACA;QACA;MACA;IACA;IACA,UACAQ;MAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACAZ;QACA;MACA;IACA;IACA,UACAa;MACA;IACA;IACA,gBACAC;MACA;QACA;MACA;IACA;IACA,gBACAC;MACA;QACA;MACA;MACA;IACA;IACA,eACAC;MACA;QAAA;QACA;QACA;MACA;QAAA;QACA;QACA;MACA;IACA;IACA,UACAC;MAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACAvB;MACA;IACA;IACA,UACAwB;MAAA;MACA;MACAZ;MACA;MACA;QACA;MACA;;MACA;QACAZ;MACA;IACA;IACAyB;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;MACA;;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA,cACAC;MAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;QACA;QACA,mGACA1F;UACA;UACA;UACA0E;YACA;UACA;UACA;AACA;QACA;MAEA;QACA;QACA;AACA;QACA,0FACAvB;UACA;UACA;YACA;YACA;UACA;QACA;UACA;YACA;YACA;UACA;QACA;;QACA;UACA;QACA;MACA;MACA;QACA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;UACA;YACA;cACAwB;YACA;UACA;UACA;UACA;UACAL;YACA;YACA;UACA;QACA;MACA;MACA;QACA;QACA;QACA;MACA;MACA;MACA,+FACAlB;QACAwB;QACA;UACA;QACA;MACA;IACA;IACA,YACAe;MAAA;MACA;MACA;QACA;UACAhB;QACA;MACA;MACA;MACA;MACAL;QACA;QACA;MACA;IACA;IACA,gBACAsB;MAAA;MACA;QACA;UACA;QACA;MACA;IACA;IACA,gBACAC;MAAA;MACA;MACA;MACA;MACA;MACAtB;QACA;UACA;QACA;UACA;QACA;UACA;QACA;MACA;MACA;MACA;IACA;IACA,gBACAuB;MACA;MACAC;MACAA;MACA;MACA;MACA;QACA;QACA;MACA;MACA;IACA;IACA,eACAC;MACA;QACA;QACA;UACA;QACA;;QACAD;QACAA;MACA;IACA;IACA,YACAE;MACA,2GACAC;QACA;QACA;MACA;IACA;IACA,YACAC;MAAA;MACAvB;MACA;QACA,4GACAzD;UACA;UACA;UACA;QACA;MACA;IACA;IACA,eACAiF;MACA;MACA;MACA;QAAA;QACA;QACA;QACA;MACA;MACA;MACA;QACA;QACA;QACA;QACAxB;QACAmB;QACAA;MACA;IACA;IACA,cACAM;MAAA;MACA;QACA;QACA;UACA;UACA;YACA;UACA;QACA;MACA;IACA;IACA,YACAC;MAAA;MACA;MACA;QACA;QACA;UACAtC;QACA;QACA;UACA;UACA;UACA;QACA;MACA;IACA;IACA,YACAuC;MAAA;MACA;QACA;UACA;QACA;UACA;QACA;QACA;UACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IACA,WACAC;MAEA;MAMA;MACA;QACA7B;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACA,aACA8B;MAAA;MACA;MACA;MACAjG;MACAA;MACA;MACA;MACA;QACA;MACA;IACA;IACA,WACAkG;MAEA;IAKA;IACA,aACAC;MAEA;;MAKA;MACA;QACA;MACA;QACA;MACA;MACA;MACA;QACA;UACA;UACA;YACA;YACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA,aACAC;MAAA;MAEA;;MAKA;MACA;MACA;MACA;QACA;QACA;UACA;UACA;UACAvC;YACA;UACA;QACA;UACA;UACA;UACA;UACA;QACA;MACA;IACA;IACA,YACAwC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QAAA;QACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;QACAnC;QACA;UACA;QACA;;QACA;QACA;QACA;UAEA;UACA;UAMA;UACA;UACA;YACAoC;YACAC;YACAC;YACAC;YACAC;YACAC;YACAC;YACAC;UACA;UACA;UACA;UACA;UACA3C;UACA;YACA;UACA;UACA;QACA;MACA;QACA;QACA;UACA;UACA;QACA;MACA;IACA;IACA,aACA4C;MACA;IACA;IACA,gBACAC;MAAA;MACAnD;QACA;UACA;YACA;UACA;QACA;QACAA;UACA;YACA;cACAP;YACA;UACA;QACA;MACA;IACA;IACA,cACA2D;MACA;IACA;IACA,UACAC;MAAA;MACA;QACA;QACAxD;UACAJ;UACAA;UACAA;UACAA;UACA;QACA;QACA;UACAA;QACA;QACA;QACA;QACA;UACA;YACA6D;UACA;QACA;QACA;QACA;QACA;MACA;QACA;MACA;IACA;IACA,UACAC;MAAA;MACA;MACA;QAAA;UAAA;QAAA;MAAA;MACAC;QACA/D;MACA;MACA;MACA;QAAA;QACA;QACA;QACA;QACA;MACA;MACA;MACAO;QACA;UAAA;UACA;UACA;UACAA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;cACA;cACAA;gBACA;cACA;YACA;UACA;UACA;QACA;QACA;UAAA;UACA;UACA;UACA;UACA;UACA;QACA;QACA;QACA;QACA;QACA;QACA;UACA;YACAsD;YACAG;UACA;QACA;QACA;UAAA;UACA;UACA;UACA;QACA;UAAA;UACA;YACA;UACA;UACA;UACA;UACA;QACA;MACA;IACA;IACA,aACAC;MAAA;MACA;MACA;MACA;QACA;MACA;MACA1D;QACA;QACA;UACA;YACA;cACA;YACA;cACA;YACA;cACA;YACA;UACA;QACA;UACA;YACA;cACA;gBACA;cACA;gBACA;cACA;gBACA;cACA;YACA;UACA;QACA;QACA;QACA;QACA;UACA;UACAI;YACA;UACA;QACA;QACA;UACA;UACA;QACA;QACA;UACA;UACA;YACA;UACA;YACA;UACA;UACA;YACA;YACA;cACA;gBACAC;cACA;YACA;YACAsD;YACA;YACA;YACA3D;cACA;cACA;cACA;cACA,sEACAtD;gBACA4D;gBACA;kBACA;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IACA,YACAsD;MAAA;MACA;QACA;UACA;QACA;MACA;MACA;QACA;UACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjqCA;AAAA;AAAA;AAAA;AAA+4B,CAAgB,o3BAAG,EAAC,C;;;;;;;;;;;ACAn6B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/tsp-video/tsp-video-list/video-v.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./video-v.vue?vue&type=template&id=e52043e8&\"\nvar renderjs\nimport script from \"./video-v.vue?vue&type=script&lang=js&\"\nexport * from \"./video-v.vue?vue&type=script&lang=js&\"\nimport style0 from \"./video-v.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/tsp-video/tsp-video-list/video-v.vue\"\nexport default component.exports","export * from \"-!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./video-v.vue?vue&type=template&id=e52043e8&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.contentShow\n    ? _vm.__map(_vm.vodList, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var g0 = _vm.totalPlayList.length\n        return {\n          $orig: $orig,\n          g0: g0,\n        }\n      })\n    : null\n  var g1 = _vm.contentShow\n    ? _vm.vodList.length > 0 && _vm.beforeVodInfo.sliderShow\n    : null\n  var m0 =\n    _vm.contentShow && g1 && _vm.sliderDrag\n      ? _vm.formatSeconds(_vm.sliderTime)\n      : null\n  var m1 =\n    _vm.contentShow && g1 && _vm.sliderDrag\n      ? _vm.formatSeconds(_vm.videoTime)\n      : null\n  var g2 =\n    _vm.contentShow && g1\n      ? _vm.vodList.length > 0 && _vm.beforeVodInfo.sliderShow\n      : null\n  var g3 =\n    _vm.contentShow && g1\n      ? _vm.vodList.length > 0 && _vm.beforeVodInfo.loadingShow\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        g1: g1,\n        m0: m0,\n        m1: m1,\n        g2: g2,\n        g3: g3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./video-v.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./video-v.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"page\">\r\n\t\t<view :style=\"{height:videoStyle.statusBarHeight}\"></view>\r\n\t\t<view class=\"contentBox\" v-if=\"contentShow\" :style=\"{width:videoStyle.width,height:videoStyle.height}\">\r\n\t\t\t<swiper :style=\"{width:videoStyle.width,height:videoStyle.height}\" vertical :circular=\"circular\"\r\n\t\t\t\t:duration=\"durationNum\" @change=\"changeSwiper\" @animationfinish=\"swiperVod\" class=\"swiperBox\"\r\n\t\t\t\t:current=\"currentIndex\">\r\n\t\t\t\t<swiper-item v-for=\"(item,index) in vodList\" :key=\"index\" class=\"box\">\r\n\t\t\t\t\t<view :style=\"{opacity:shadeNum > 2 ?'0':'1',width:videoStyle.width,height:videoStyle.height}\">\r\n\t\t\t\t\t\t<view class=\"vodPlayer\">\r\n\t\t\t\t\t\t\t<video :style=\"{width:videoStyle.width,height:videoStyle.height}\" :src=\"item.vodUrl\"\r\n\t\t\t\t\t\t\t\t:controls=\"false\" :enable-progress-gesture=\"false\" :show-loading=\"false\"\r\n\t\t\t\t\t\t\t\t:show-play-btn=\"false\" :show-center-play-btn=\"false\" :show-fullscreen-btn=\"false\"\r\n\t\t\t\t\t\t\t\t:vslide-gesture-in-fullscreen=\"false\" :show-progress=\"false\"\r\n\t\t\t\t\t\t\t\t:object-fit=\"item.object_fit\" :http-cache=\"true\" :loop=\"loopPlay\"\r\n\t\t\t\t\t\t\t\t:muted=\"(index == vodIndex && !muteSetup) ? false : true\" :id=\"'myVideo'+index+swId\"\r\n\t\t\t\t\t\t\t\t@play=\"startPlay(index)\" @waiting=\"bufferVod(index)\"\r\n\t\t\t\t\t\t\t\t@timeupdate=\"timeupdateVod($event,index)\" @error=\"errVod(index)\"\r\n\t\t\t\t\t\t\t\t@ended=\"endedVod(index)\">\r\n\t\t\t\t\t\t\t</video>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 视频封面 -->\r\n\t\t\t\t\t\t<view class=\"vodPause-img\" v-if=\"item.coverShow\">\r\n\t\t\t\t\t\t\t<image :src=\"item.coverImg\" :mode=\"item.object_fit == 'cover'?'aspectFill':'widthFix'\"\r\n\t\t\t\t\t\t\t\tclass=\"cover-img\"\r\n\t\t\t\t\t\t\t\t:style=\"{opacity:item.coverOpacity?1:0,width:videoStyle.width,height:item.object_fit == 'cover'?videoStyle.height:0}\">\r\n\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 暂停图标 -->\r\n\t\t\t\t\t\t<view class=\"vodPause-img\" v-if=\"item.pauseShow\">\r\n\t\t\t\t\t\t\t<image src=\"/static/icon/vod-play.png\" class=\"vodPauseImage\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view @click=\"handClick($event,index)\" @longpress=\"longpress(item)\" class=\"vodPlayView\"\r\n\t\t\t\t\t\t\t:style=\"videoStyle\" @touchstart=\"vodViewStart($event)\" @touchmove=\"vodViewMove($event)\"\r\n\t\t\t\t\t\t\t@touchend=\"vodViewEnd($event)\"></view>\r\n\t\t\t\t\t\t<!-- 底部标题、右侧操作栏 -->\r\n\t\t\t\t\t\t<videoMenu :ref=\"'menuRef'+index\" :vodIndex=\"vodIndex\" :vodCurIndex=\"vodCurIndex\" :item=\"item\"\r\n\t\t\t\t\t\t\t:discussNum=\"totalPlayList.length\" :index=\"index\" :sliderDrag=\"sliderDrag\"\r\n\t\t\t\t\t\t\t:moveOpacity=\"moveOpacity\" :palyCartoon=\"palyCartoon\" @handleInfo=\"handleInfo\"></videoMenu>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 底层app图标 -->\r\n\t\t\t\t\t<view class=\"vodLayer\">\r\n\t\t\t\t\t\t<image src=\"/static/icon/sound.png\" mode=\"\" class=\"vodLayer-img\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t\t<!-- 遮罩层，防止滑动过快 -->\r\n\t\t\t<swiper class=\"shade-swiper\"\r\n\t\t\t\t:style=\"{width:videoStyle.width,height:videoStyle.height,pointerEvents:showShade?'auto':'none',opacity:showShade?'1':'0'}\"\r\n\t\t\t\tvertical>\r\n\t\t\t\t<swiper-item v-for=\"(item,index) in 1\" :key=\"index\" class=\"box\">\r\n\t\t\t\t\t<!-- 底层图标 -->\r\n\t\t\t\t\t<view class=\"vodLayer\">\r\n\t\t\t\t\t\t<image src=\"/static/icon/sound.png\" mode=\"\" class=\"vodLayer-img\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t\t<!-- 底部加载动画 -->\r\n\t\t\t<view class=\"pullup\" v-if=\"loadShow\">\r\n\t\t\t\t<view style=\"width: 32rpx;height: 32rpx;margin-right: 30rpx;\">\r\n\t\t\t\t\t<view class=\"k-ball7a\" style=\"width: 20rpx;height: 20rpx;\"></view>\r\n\t\t\t\t\t<view class=\"k-ball7b\" style=\"width: 20rpx;height: 20rpx;\"></view>\r\n\t\t\t\t\t<view class=\"k-ball7c\" style=\"width: 20rpx;height: 20rpx;\"></view>\r\n\t\t\t\t\t<view class=\"k-ball7d\" style=\"width: 20rpx;height: 20rpx;\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flooter\" :style=\"{opacity:moveOpacity ? 0 : 1,bottom:speedBottom+'px'}\"\r\n\t\t\t\tv-if=\"vodList.length > 0 && beforeVodInfo.sliderShow\">\r\n\t\t\t\t<!-- 滑动进度条显示时间 -->\r\n\t\t\t\t<view class=\"sliderData\" v-if=\"sliderDrag\">\r\n\t\t\t\t\t<view class=\"slider-text\">\r\n\t\t\t\t\t\t<text>{{formatSeconds(sliderTime)}}</text>\r\n\t\t\t\t\t\t<text style=\"font-size: 30rpx;margin: 0 10rpx;\">/</text>\r\n\t\t\t\t\t\t<text style=\"opacity: 0.5;\">{{formatSeconds(videoTime)}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 进度条 -->\r\n\t\t\t\t<view class=\"sliderBox\" :style=\"{opacity:shadeNum > 2 ?'0':'1'}\" @touchmove.stop=\"touchmoveSlider\"\r\n\t\t\t\t\t@touchstart.stop=\"touchmoveSlider\" @touchend.stop=\"touchendSlider\"\r\n\t\t\t\t\tv-if=\"vodList.length > 0 && beforeVodInfo.sliderShow\">\r\n\t\t\t\t\t<view class=\"slider-item\" :style=\"{height: brightSlider?'18px':'2px'}\">\r\n\t\t\t\t\t\t<!-- 底层 -->\r\n\t\t\t\t\t\t<view class=\"slider-box\" :class=\"[brightSlider?'slider-box-active':'']\"></view>\r\n\t\t\t\t\t\t<!-- 滑块 -->\r\n\t\t\t\t\t\t<!-- <view class=\"slider-block\" :class=\"[brightSlider?'slider-block-active':'']\" :style=\"{transform:`translateX(${sliderProgress}px)`}\"></view> -->\r\n\t\t\t\t\t\t<!-- 滑动层 -->\r\n\t\t\t\t\t\t<view class=\"slider-load\" :class=\"[brightSlider?'slider-load-active':'']\"\r\n\t\t\t\t\t\t\t:style=\"{transform: `translateX(${sliderProgress > 0 ? sliderProgress - screenWidth : -screenWidth}px)`}\">\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-else :style=\"{width:screenWidth+'px',height:'18px'}\"></view>\r\n\t\t\t\t<!-- loading加载动画进度 -->\r\n\t\t\t\t<view class=\"loadSlider\" v-if=\"vodList.length > 0 && beforeVodInfo.loadingShow\">\r\n\t\t\t\t\t<view :style=\"{opacity:brightSlider ? 0 : 1}\">\r\n\t\t\t\t\t\t<view class=\"loading-slider\" ref=\"loadSlider\" :style=\"{width:screenWidth+'px'}\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 刷新 -->\r\n\t\t<view class=\"refresh\" v-if=\"refreshShow\">\r\n\t\t\t<view style=\"height: 140rpx;\"></view>\r\n\t\t\t<!--  :style=\"{opacity:refreshOpacity,transform: 'translateY('+refreshclientY+'px)'}\" -->\r\n\t\t\t<view class=\"refreshBox\" :style=\"{opacity:refreshOpacity}\">\r\n\t\t\t\t<view style=\"width: 32rpx;height: 32rpx;\"></view>\r\n\t\t\t\t<view>下拉刷新内容</view>\r\n\t\t\t\t<view style=\"width: 32rpx;height: 32rpx;margin-right: 30rpx;\">\r\n\t\t\t\t\t<view class=\"k-ball7a k-paused\" style=\"width: 20rpx;height: 20rpx;\"\r\n\t\t\t\t\t\t:class=\"[refreshOpen?'k-running':'']\"></view>\r\n\t\t\t\t\t<view class=\"k-ball7b k-paused\" style=\"width: 20rpx;height: 20rpx;\"\r\n\t\t\t\t\t\t:class=\"[refreshOpen?'k-running':'']\"></view>\r\n\t\t\t\t\t<view class=\"k-ball7c k-paused\" style=\"width: 20rpx;height: 20rpx;\"\r\n\t\t\t\t\t\t:class=\"[refreshOpen?'k-running':'']\"></view>\r\n\t\t\t\t\t<view class=\"k-ball7d k-paused\" style=\"width: 20rpx;height: 20rpx;\"\r\n\t\t\t\t\t\t:class=\"[refreshOpen?'k-running':'']\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 点赞桃心 -->\r\n\t\t<view class=\"doubleImage\" v-for=\"(item,index) in likeList\" :key=\"index\" :ref=\"item.id+'Ref'\"\r\n\t\t\t:class=\"[item.className]\" :style=\"{width: item.width,height:item.height,top:item.top,left:item.left}\">\r\n\t\t\t<image src=\"/static/icon/selectTaoxin.png\" v-if=\"item.isShow\"\r\n\t\t\t\t:style=\"{width: item.width,height:item.height,transform: `rotate(${item.rotate})`}\" />\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport videoMenu from '../tsp-menu/tsp-menu-v.vue'\r\n\t/* \r\n lodData 上拉加载回调\r\n refreshData 下拉加载回调\r\n */\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tvideoMenu\r\n\t\t},\r\n\t\tprops: {\r\n\t\t\t/* 是否开启下拉刷新 */\r\n\t\t\tloadOpen: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t/* tabBar栏 0系统tabBar栏 1自定义tabBar栏 */\r\n\t\t\ttabBarShow: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\t/* 自定义底部栏的高度 */\r\n\t\t\ttabBarHeight: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 50\r\n\t\t\t},\r\n\t\t\t/* 进度条离底部的距离 px*/\r\n\t\t\tspeedBottom: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\t/* 初始加载完成是否自动播放 */\r\n\t\t\tautoplay: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t/* 是否循环播放 */\r\n\t\t\tloopPlay: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t/* 是否开启自动播放 */\r\n\t\t\tnextPlay: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\t/* 视频总数量，有值才能滑动加载到最后一个视频 */\r\n\t\t\ttotalvod: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\t/* 是否开启双击点赞 */\r\n\t\t\tdoubleOpen: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t/* 双击点赞屏幕是否显示桃心 */\r\n\t\t\tdoubleHeart: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t/* 多个tab视频时需传入不同的类型 */\r\n\t\t\tswId: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\t/* 是否有显示 statusBarHeight 状态栏适配 */\r\n\t\t\tshowBarHeight: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tvideoStyle: {},\r\n\t\t\t\tscreenWidth: 0, //屏幕的宽度\r\n\t\t\t\tscreenHeight: 0, //屏幕的高度\r\n\t\t\t\tvideoCtx: null,\r\n\t\t\t\tvodIndex: 0, // 当前视频下标\r\n\t\t\t\tcurrentIndex: 0, //定位播放的下标\r\n\t\t\t\tcontentShow: false,\r\n\t\t\t\tloadShow: false,\r\n\t\t\t\tautoplayVideo: true, // 初始加载完成是否自动播放\r\n\t\t\t\t//当前播放的视频数组\r\n\t\t\t\tvodList: [\r\n\t\t\t\t\t/* {\r\n\t\t\t\t\t\tvodUrl:\"https://outin-9cc4a7aedd2a11eaabb800163e1a65b6.oss-cn-shanghai.aliyuncs.com/customerTrans/43121ec9955a1ce95146d379f15ea9bd/566eafe2-17b52f0f17b-0007-0f29-cc2-eb217.mp4\",\r\n\t\t\t\t\t\tcoverImg:'/static/image/cover1.jpg', //视频封面\r\n\t\t\t\t\t\tcoverShow:false, //是否显示视频封面，vue 小程序端不播放会显示视频，可以不用显示封面，App不播放不会显示视频，就需要封面了\r\n\t\t\t\t\t\tvodPaly:true, //是否播放、暂停视频\r\n\t\t\t\t\t\tvodShow:true, //是否显示视频\r\n\t\t\t\t\t\tobject_fit:'contain', //视频的显示类型\r\n\t\t\t\t\t\tpauseShow:false, //是否显示暂停图标\r\n\t\t\t\t\t\tloadingShow:false, //是否显示loading加载动画\r\n\t\t\t\t\t\tfabulousShow:false,//是否点赞\r\n\t\t\t\t\t\tfollowReally:false, //是否关注\r\n\t\t\t\t\t\tsliderShow:true, //是否显示进度条\r\n\t\t\t\t\t\trotateImgShow:true, //是否显示旋转头像\r\n\t\t\t\t\t} */\r\n\t\t\t\t],\r\n\t\t\t\ttotalPlayList: [],\r\n\t\t\t\tfinalList: [],\r\n\t\t\t\tchangeIndex: 0, //current 下标\r\n\t\t\t\tbeforeVodInfo: {}, //当前播放视频对象\r\n\t\t\t\tvodCurIndex: 0, //当前播放视频对象下标\r\n\t\t\t\tcircular: true,\r\n\t\t\t\tdurationNum: 300,\r\n\t\t\t\tshowShade: false, //显示遮罩swiper\r\n\t\t\t\topenSpot: false,\r\n\t\t\t\tshadeNum: 0,\r\n\t\t\t\tbufferTime: null, //缓冲视频显示加载动画防抖\r\n\t\t\t\tsliderProgress: 0, //进度条滑动层宽度\r\n\t\t\t\tsliderTime: 0, //显示滑动进度条时变化的时间\r\n\t\t\t\tvideoTime: 0, //视频时长 时间\r\n\t\t\t\tendTime: 0, //滑动进度条最终的时间\r\n\t\t\t\tsliderDrag: false, //是否在拖动进度\r\n\t\t\t\tbrightSlider: false, //是否显示光亮的进度条\r\n\t\t\t\tsliderEndTime: null, //滑动结束隐藏光亮进度条时间延迟\r\n\t\t\t\tbufferNum: null, //显示loading加载进度的时间条件\r\n\t\t\t\tbufferShow: false, //显示loading加载进度的条件\r\n\t\t\t\tplayOpen: false, //视频播放失败，是否重播视频的条件\r\n\t\t\t\tfailTime: null, //视频播放失败，重播视频的时间\r\n\t\t\t\trepeatTime: null,\r\n\t\t\t\tpalyCartoon: false, //是否播放旋转头像\r\n\t\t\t\tshakePlay: false, //是否有防抖视频播放\r\n\t\t\t\ttouchClientY: 0, //触碰的坐标\r\n\t\t\t\tmoveClientY: 0, //移动的坐标\r\n\t\t\t\tmoveOpacity: false, //是否透明\r\n\t\t\t\trefreshShow: false, //是否显示下拉刷新\r\n\t\t\t\trefreshOpacity: 0, //下拉刷新的透明度\r\n\t\t\t\trefreshclientY: 0, //下拉刷新的坐标\r\n\t\t\t\trefreshOpen: false, //下拉刷新的触发条件\r\n\t\t\t\tplayErrTime: null,\r\n\t\t\t\tinterceptIndex: [],\r\n\t\t\t\tloadTime: null,\r\n\t\t\t\tbeginLoad: 0,\r\n\t\t\t\tloadStart: false,\r\n\t\t\t\tmuteSetup: false, //是否设置为静音\r\n\t\t\t\t/* 双击点赞部分 */\r\n\t\t\t\tlastTapDiffTime: 0, //上次点击时间\r\n\t\t\t\tlastTapTimeoutFunc: null, //单击事件事件函数\r\n\t\t\t\tlikeList: [], //双击点赞显示的桃心数据\r\n\t\t\t\tlikeId: 1,\r\n\t\t\t\tdoubleOutTime: null,\r\n\t\t\t\tclearDoubleTime: null,\r\n\t\t\t\ttailPlay: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tconst deviceInfo = uni.getSystemInfoSync()\r\n\t\t\tlet topBarHeight = this.showBarHeight ? deviceInfo.statusBarHeight : 0; //statusBarHeight 状态栏高度\r\n\t\t\tthis.videoStyle.statusBarHeight = topBarHeight + 'px';\r\n\t\t\tthis.videoStyle.width = deviceInfo.screenWidth + 'px';\r\n\t\t\tthis.screenWidth = deviceInfo.screenWidth //屏幕的宽度\r\n\t\t\tthis.screenHeight = deviceInfo.screenHeight //屏幕的高度\r\n\t\t\tif (this.tabBarShow == 1) { //减去自定义底部栏的高度\r\n\t\t\t\tthis.videoStyle.height = (deviceInfo.screenHeight - topBarHeight - this.tabBarHeight) + 'px';\r\n\t\t\t} else {\r\n\t\t\t\tthis.videoStyle.height = deviceInfo.windowHeight - topBarHeight + 'px';\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tvodCurIndex(newIndex, oldIndex) {\r\n\t\t\t\t/* 上一个视频处理 */\r\n\t\t\t\tif (oldIndex >= 0) {\r\n\t\t\t\t\tlet oldObj = null\r\n\t\t\t\t\tthis.vodList.filter((item, index) => {\r\n\t\t\t\t\t\tif (oldIndex == item.videoIndex) {\r\n\t\t\t\t\t\t\titem.coverOpacity = item.coverShow ? true : false //是否显示封面\r\n\t\t\t\t\t\t\titem.vodPaly = false;\r\n\t\t\t\t\t\t\titem.pauseShow = false;\r\n\t\t\t\t\t\t\titem.loadingShow = false;\r\n\t\t\t\t\t\t\tuni.createVideoContext('myVideo' + index + this.swId, this).pause();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/* 初始加载视频 */\r\n\t\t\tinitVod(dataList, index) {\r\n\t\t\t\tthis.autoplayVideo = this.autoplay\r\n\t\t\t\tif (index) {\r\n\t\t\t\t\tthis.durationNum = 0\r\n\t\t\t\t}\r\n\t\t\t\tlet playIndex = index ? index : 0\r\n\t\t\t\t/* 拼接参数数据 */\r\n\t\t\t\tdataList.filter((item, i) => {\r\n\t\t\t\t\titem.videoIndex = i\r\n\t\t\t\t\titem.vodPaly = (i == playIndex ? true : false); //是否播放、暂停视频\r\n\t\t\t\t\titem.pauseShow = false //是否显示暂停图标\r\n\t\t\t\t\titem.loadingShow = false //是否显示loading加载动画\r\n\t\t\t\t\titem.coverOpacity = item.coverShow ? true : false //是否显示封面\r\n\t\t\t\t})\r\n\t\t\t\tdataList.sort((a, b) => {\r\n\t\t\t\t\treturn a.videoIndex - b.videoIndex\r\n\t\t\t\t})\r\n\t\t\t\tthis.totalPlayList = dataList;\r\n\t\t\t\tthis.contentShow = dataList.length > 0 ? true : false\r\n\t\t\t\tthis.loadShow = dataList.length > 0 ? true : false\r\n\t\t\t\tif (this.totalPlayList.length >= 3) {\r\n\t\t\t\t\tthis.vodList = [{}, {}, {}]\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.vodList = dataList\r\n\t\t\t\t}\r\n\t\t\t\tthis.getPlayVod(playIndex, 'initialLoad')\r\n\t\t\t},\r\n\t\t\t/* 选择指定视频下标播放 */\r\n\t\t\tscrollToVod(playIndex) {\r\n\t\t\t\tthis.durationNum = 0\r\n\t\t\t\tthis.getPlayVod(playIndex, null)\r\n\t\t\t},\r\n\t\t\t/* 根据指定下标播放 */\r\n\t\t\tgetPlayVod(playIndex, uType) {\r\n\t\t\t\tlet currentNum = 0\r\n\t\t\t\tthis.vodCurIndex = playIndex\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif (this.totalPlayList.length >= 3) {\r\n\t\t\t\t\t\tlet amount = this.totalPlayList.length; //总视频数量\r\n\t\t\t\t\t\tlet showVod = amount % 3\r\n\t\t\t\t\t\tlet starIdx = playIndex - 1 < 0 ? 0 : playIndex - 1\r\n\t\t\t\t\t\tlet endIdx = playIndex + 2\r\n\t\t\t\t\t\tlet endNum = amount - showVod\r\n\r\n\t\t\t\t\t\tif (playIndex == 0 || (playIndex + 1) >= endNum) {\r\n\t\t\t\t\t\t\tthis.circular = false //第一个视频和最后视频禁止循环滑动\r\n\t\t\t\t\t\t\tlet resultList = []\r\n\t\t\t\t\t\t\tif (playIndex == 0) {\r\n\t\t\t\t\t\t\t\tresultList = JSON.parse(JSON.stringify(this.totalPlayList.slice(starIdx,\r\n\t\t\t\t\t\t\t\t\tplayIndex + 3)))\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tresultList = JSON.parse(JSON.stringify(this.totalPlayList.slice(endNum - 3,\r\n\t\t\t\t\t\t\t\t\tendNum)))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.setSliceList(resultList) /* 截取的视频数据对3求余数赋值 */\r\n\t\t\t\t\t\t\t/* 如果总视频数量对3求余数不为0，则追加剩余视频数据 */\r\n\t\t\t\t\t\t\tif (playIndex != 0) {\r\n\t\t\t\t\t\t\t\tlet arrList = JSON.parse(JSON.stringify(this.totalPlayList.slice(endNum, amount)))\r\n\t\t\t\t\t\t\t\tarrList.filter(item => {\r\n\t\t\t\t\t\t\t\t\tthis.vodList.push(item)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tif (this.totalPlayList.length >= this.totalvod) {\r\n\t\t\t\t\t\t\t\t\tthis.loadShow = false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.circular = true\r\n\t\t\t\t\t\t\tlet resultList = JSON.parse(JSON.stringify(this.totalPlayList.slice(starIdx, endIdx)))\r\n\t\t\t\t\t\t\tthis.setSliceList(resultList) /* 截取的视频数据对3求余数赋值 */\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.circular = false //第一个视频和最后视频禁止循环滑动\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.getVodInfo();\r\n\t\t\t\t\tthis.vodList.filter((item, index) => {\r\n\t\t\t\t\t\tif (this.vodCurIndex == item.videoIndex) {\r\n\t\t\t\t\t\t\tcurrentNum = index\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t/* 到底加载数据 */\r\n\t\t\t\t\tif ((this.vodCurIndex + 1) >= this.totalPlayList.length - this.totalPlayList.length % 3 && this\r\n\t\t\t\t\t\t.totalPlayList.length >= 3) {\r\n\t\t\t\t\t\tthis.loadStart = true\r\n\t\t\t\t\t\tclearTimeout(this.loadTime)\r\n\t\t\t\t\t\tthis.loadTime = setTimeout(() => {\r\n\t\t\t\t\t\t\tthis.beginLoad = this.totalPlayList.length\r\n\t\t\t\t\t\t\tif ((this.vodCurIndex + 1) == this.beginLoad) {\r\n\t\t\t\t\t\t\t\tthis.vodList[0].videoIndex = this.beginLoad\r\n\t\t\t\t\t\t\t\tthis.tailPlay = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.$emit('lodData')\r\n\t\t\t\t\t\t}, 300)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (playIndex > 0) { //开启定位播放\r\n\t\t\t\t\t\tthis.currentIndex = currentNum\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.changeIndex = currentNum\r\n\t\t\t\t\tthis.vodIndex = currentNum\r\n\t\t\t\t}, 100)\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.durationNum = 300\r\n\t\t\t\t\tif (uType == 'initialLoad') {\r\n\t\t\t\t\t\tif (this.autoplayVideo) {\r\n\t\t\t\t\t\t\tthis.swiperPlay(currentNum);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.beforeVodInfo.vodPaly = false;\r\n\t\t\t\t\t\t\tthis.beforeVodInfo.pauseShow = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.swiperPlay(currentNum);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 200)\r\n\t\t\t},\r\n\t\t\t/* 赋值截取的数据 */\r\n\t\t\tsetSliceList(resData) {\r\n\t\t\t\tresData.filter(item => {\r\n\t\t\t\t\tif (item.videoIndex % 3 == 0) {\r\n\t\t\t\t\t\tthis.vodList[0] = item\r\n\t\t\t\t\t} else if (item.videoIndex % 3 == 1) {\r\n\t\t\t\t\t\tthis.vodList[1] = item\r\n\t\t\t\t\t} else if (item.videoIndex % 3 == 2) {\r\n\t\t\t\t\t\tthis.vodList[2] = item\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/* 到底加载方法 */\r\n\t\t\tlodingData(dataList) {\r\n\t\t\t\tlet num = this.totalPlayList.length; //获取视频数据的长度\r\n\t\t\t\tif (dataList && dataList.length == 0) return\r\n\t\t\t\tdataList.filter((item, i) => {\r\n\t\t\t\t\titem.videoIndex = num + i\r\n\t\t\t\t\titem.vodPaly = false //是否播放、暂停视频\r\n\t\t\t\t\titem.pauseShow = false //是否显示暂停图标\r\n\t\t\t\t\titem.loadingShow = false //是否显示loading加载动画\r\n\t\t\t\t\titem.coverOpacity = item.coverShow ? true : false //是否显示封面\r\n\t\t\t\t})\r\n\t\t\t\tthis.totalPlayList = this.totalPlayList.concat(dataList); //拼接数据\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t/* 截取要播放的视频列表 */\r\n\t\t\t\t\tthis.getVodSliceList()\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t/* 截取的视频数据对3求余数赋值 */\r\n\t\t\t\t\t\tthis.finalList.filter(item => {\r\n\t\t\t\t\t\t\tif (item.videoIndex != this.vodCurIndex) {\r\n\t\t\t\t\t\t\t\tif (item.videoIndex % 3 == 0) {\r\n\t\t\t\t\t\t\t\t\tthis.vodList[0] = item\r\n\t\t\t\t\t\t\t\t} else if (item.videoIndex % 3 == 1) {\r\n\t\t\t\t\t\t\t\t\tthis.vodList[1] = item\r\n\t\t\t\t\t\t\t\t} else if (item.videoIndex % 3 == 2) {\r\n\t\t\t\t\t\t\t\t\tthis.vodList[2] = item\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tlet appendNum = this.totalvod - (this.totalvod % 3)\r\n\t\t\t\t\t\t/* 如果总视频数量对3求余数不为0，则追加剩余视频数据 */\r\n\t\t\t\t\t\tif (this.vodCurIndex != 0 && this.vodList.length == 3 && (this.vodCurIndex + 1) >=\r\n\t\t\t\t\t\t\tappendNum && this.totalvod > 0) {\r\n\t\t\t\t\t\t\tlet arrList = this.totalPlayList.slice(this.vodCurIndex + 1, this.totalPlayList\r\n\t\t\t\t\t\t\t\t.length)\r\n\t\t\t\t\t\t\tarrList.filter(item => {\r\n\t\t\t\t\t\t\t\tthis.vodList.push(item)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\tthis.circular = true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif ((this.vodCurIndex + 1) == this.beginLoad) {\r\n\t\t\t\t\t\t\tthis.vodList[0].videoIndex = this.beginLoad\r\n\t\t\t\t\t\t\tthis.tailPlay = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 100)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/* 重新加载 */\r\n\t\t\trefreshSquare(dataList, index) {\r\n\t\t\t\tlet playIndex = index ? index : 0\r\n\t\t\t\tthis.resetData(); /* 重置状态数据 */\r\n\t\t\t\tthis.refreshShow = false; //隐藏下拉刷新\r\n\t\t\t\tthis.refreshOpen = false; //下拉刷新的触发条件\r\n\t\t\t\tthis.vodCurIndex = 0\r\n\t\t\t\tthis.currentIndex = 0\r\n\t\t\t\tthis.vodList = []\r\n\t\t\t\tthis.totalPlayList = []\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.initVod(dataList, playIndex); //初始加载视频\r\n\t\t\t\t}, 100)\r\n\t\t\t},\r\n\t\t\t/* 静音设置 */\r\n\t\t\tmuteVideo(val) {\r\n\t\t\t\tthis.muteSetup = val\r\n\t\t\t},\r\n\t\t\t/* onShow播放视频 */\r\n\t\t\tshowPlay() {\r\n\t\t\t\tif (this.vodIndex != null && this.contentShow && !this.beforeVodInfo.vodPaly) {\r\n\t\t\t\t\tthis.videoPlay(this.vodIndex);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/* onHide暂停视频 */\r\n\t\t\thidePause() {\r\n\t\t\t\tif (this.vodIndex != null && this.contentShow && this.beforeVodInfo.vodPaly) {\r\n\t\t\t\t\tthis.videoPause(this.vodIndex);\r\n\t\t\t\t}\r\n\t\t\t\tthis.brightSlider = false; //隐藏光亮的进度条\r\n\t\t\t},\r\n\t\t\t/* 点击暂停、播放视频 */\r\n\t\t\tplaySpot(index) {\r\n\t\t\t\tif (this.beforeVodInfo.vodPaly) { //暂停\r\n\t\t\t\t\tthis.videoPause(index)\r\n\t\t\t\t\tthis.beforeVodInfo.pauseShow = true; //显示暂停图标\r\n\t\t\t\t} else { //播放\r\n\t\t\t\t\tthis.videoPlay(index)\r\n\t\t\t\t\tthis.beforeVodInfo.pauseShow = false; //关闭暂停图标\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/* 播放视频 */\r\n\t\t\tvideoPlay(index) {\r\n\t\t\t\tthis.openSpot = true\r\n\t\t\t\tthis.getVodInfo() //获取当前视频播放对象\r\n\t\t\t\tthis.showShade = false //是否显示遮罩swiper\r\n\t\t\t\tthis.beforeVodInfo.vodPaly = true;\r\n\t\t\t\tthis.beforeVodInfo.pauseShow = false; //关闭暂停图标\r\n\t\t\t\tthis.brightSlider = false; //隐藏光亮的进度条\r\n\t\t\t\tthis.loadStart = false\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.moveOpacity = false\r\n\t\t\t\t\tuni.createVideoContext('myVideo' + index + this.swId, this).play();\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/* 暂停视频 */\r\n\t\t\tvideoPause(index) {\r\n\t\t\t\tthis.getVodInfo() //获取当前视频播放对象\r\n\t\t\t\tclearTimeout(this.sliderEndTime)\r\n\t\t\t\tthis.beforeVodInfo.vodPaly = false;\r\n\t\t\t\tif (this.vodIndex == index && this.beforeVodInfo.sliderShow) {\r\n\t\t\t\t\tthis.brightSlider = true; //显示光亮的进度条\r\n\t\t\t\t}\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tuni.createVideoContext('myVideo' + index + this.swId, this).pause();\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tchangeSwiper(ev) {\r\n\t\t\t\tlet curIndex = ev.detail.current\r\n\t\t\t\tlet videoIndex = this.vodList[curIndex].videoIndex\r\n\t\t\t\tthis.moveOpacity = true\r\n\t\t\t\tthis.shadeNum++\r\n\t\t\t\tthis.openSpot = false\r\n\t\t\t\tthis.autoplayVideo = true\r\n\t\t\t\tlet vodTotal = this.totalPlayList.length % 3\r\n\t\t\t\tif ((videoIndex == 0 || (videoIndex + 1) == this.totalPlayList.length - vodTotal) && this.shadeNum > 1) {\r\n\t\t\t\t\tthis.showShade = true //是否显示遮罩swiper\r\n\t\t\t\t}\r\n\t\t\t\tthis.changeIndex = curIndex\r\n\t\t\t\tthis.currentIndex = curIndex\r\n\t\t\t\t/* 截取要播放的视频列表 */\r\n\t\t\t\tthis.vodCurIndex = videoIndex //当前视频下标\r\n\t\t\t\tthis.getVodSliceList()\r\n\t\t\t\tthis.getVodInfo() //获取当前视频播放对象\r\n\t\t\t},\r\n\t\t\t/* 要播放视频的下标 */\r\n\t\t\tswiperVod(ev) {\r\n\t\t\t\tlet curIndex = ev.detail.current\r\n\t\t\t\tif (this.openSpot) return\r\n\t\t\t\tthis.resetData(); /* 重置状态数据 */\r\n\t\t\t\tthis.moveOpacity = false\r\n\t\t\t\tthis.shadeNum = 0\r\n\t\t\t\tthis.showShade = false //是否显示遮罩swiper\r\n\t\t\t\tthis.setSliceList(this.finalList) /* 截取的视频数据对3求余数赋值 */\r\n\t\t\t\tlet endNum = this.totalPlayList.length - (this.totalPlayList.length % 3)\r\n\t\t\t\tlet endPlay = false\r\n\t\t\t\tif (this.vodCurIndex == 0 || (this.vodCurIndex + 1) >= endNum) {\r\n\t\t\t\t\tthis.circular = false\r\n\t\t\t\t\tlet appendNum = this.totalvod - (this.totalvod % 3)\r\n\t\t\t\t\t/* 如果总视频数量对3求余数不为0，则追加剩余视频数据 */\r\n\t\t\t\t\tif (this.vodCurIndex != 0 && this.vodList.length == 3 && (this.vodCurIndex + 1) >= appendNum && this\r\n\t\t\t\t\t\t.totalvod > 0) {\r\n\t\t\t\t\t\tlet oldIndex = this.vodCurIndex\r\n\t\t\t\t\t\tlet arrList = this.totalPlayList.slice(this.vodCurIndex + 1, this.totalPlayList.length)\r\n\t\t\t\t\t\tarrList.filter(item => {\r\n\t\t\t\t\t\t\tthis.vodList.push(item)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t/* endPlay = true\r\n\t\t\t\t\t\tthis.againLocatePlay() // 重新定位播放 */\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet loadNum = this.beginLoad - (this.beginLoad % 3)\r\n\t\t\t\t\t/* 由于从外面指定的播放下标为当前数据的末端，比如10条数据，进来播放下标为8，然后又追加了余数剩下的视频，\r\n\t\t\t\t\t因为是末端所以又触发了分页加载数据，所以不删除多余的视频 */\r\n\t\t\t\t\tif (this.beginLoad > 0 && (this.vodCurIndex + 1) >= loadNum && (this.vodCurIndex + 1) <= this\r\n\t\t\t\t\t\t.beginLoad) {\r\n\t\t\t\t\t\t// console.log('不删除多余的视频')\r\n\t\t\t\t\t\tif ((this.vodCurIndex + 1) == this.beginLoad) {\r\n\t\t\t\t\t\t\tthis.vodList[0].videoIndex = this.beginLoad\r\n\t\t\t\t\t\t\tthis.tailPlay = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (this.vodList.length > 3) {\r\n\t\t\t\t\t\t\tthis.vodList.length = 3\r\n\t\t\t\t\t\t\t// this.againLocatePlay() // 重新定位播放\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.circular = true\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tif (this.totalvod > 0) {\r\n\t\t\t\t\tthis.loadShow = this.totalPlayList.length >= this.totalvod ? false : true\r\n\t\t\t\t}\r\n\t\t\t\t/* 如果总视频数量对3求余数不为0，则追加剩余视频数据，有分页加载后重新定位要播放的视频下标 */\r\n\t\t\t\tif ((this.vodCurIndex + 1) != this.beginLoad && this.tailPlay && !endPlay) {\r\n\t\t\t\t\tthis.tailPlay = false\r\n\t\t\t\t\tthis.durationNum = 0\r\n\t\t\t\t\tlet currentNum = 0\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.vodList.filter((item, index) => {\r\n\t\t\t\t\t\t\tif (item.videoIndex == this.beginLoad) {\r\n\t\t\t\t\t\t\t\tcurrentNum = index\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.currentIndex = currentNum //定位播放\r\n\t\t\t\t\t\tthis.changeIndex = currentNum\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.durationNum = 300\r\n\t\t\t\t\t\t\tthis.beginLoad = 0\r\n\t\t\t\t\t\t}, 100)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tif (!endPlay) {\r\n\t\t\t\t\tthis.vodIndex = this.changeIndex\r\n\t\t\t\t\tthis.swiperPlay(this.vodIndex);\r\n\t\t\t\t\tthis.$emit('swiperChange', this.vodList[this.vodIndex])\r\n\t\t\t\t}\r\n\t\t\t\t/* 到底加载数据 */\r\n\t\t\t\tif ((this.vodCurIndex + 1) >= this.totalPlayList.length - this.totalPlayList.length % 3 && !this\r\n\t\t\t\t\t.loadStart) {\r\n\t\t\t\t\tclearTimeout(this.loadTime)\r\n\t\t\t\t\tthis.loadTime = setTimeout(() => {\r\n\t\t\t\t\t\tthis.$emit('lodData')\r\n\t\t\t\t\t}, 300)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/* 重新定位播放 */\r\n\t\t\tagainLocatePlay() {\r\n\t\t\t\tlet currentNum = 0\r\n\t\t\t\tthis.vodList.filter((item, index) => {\r\n\t\t\t\t\tif (this.vodCurIndex == item.videoIndex) {\r\n\t\t\t\t\t\tcurrentNum = index\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.currentIndex = currentNum\r\n\t\t\t\tthis.vodIndex = currentNum\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.swiperPlay(this.vodIndex);\r\n\t\t\t\t\tthis.durationNum = 300\r\n\t\t\t\t}, 100)\r\n\t\t\t},\r\n\t\t\t/* 获取当前视频播放对象 */\r\n\t\t\tgetVodInfo() {\r\n\t\t\t\tthis.vodList.filter(item => {\r\n\t\t\t\t\tif (this.vodCurIndex == item.videoIndex) {\r\n\t\t\t\t\t\tthis.beforeVodInfo = item\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/* 截取要播放的视频列表 */\r\n\t\t\tgetVodSliceList(load) {\r\n\t\t\t\tlet videoIndex = this.vodList[this.changeIndex].videoIndex\r\n\t\t\t\tlet starIdx = videoIndex - 1 < 0 ? 0 : (load ? videoIndex : videoIndex - 1)\r\n\t\t\t\tlet endIdx = videoIndex == 0 ? 3 : videoIndex + 2\r\n\t\t\t\tlet resultList = JSON.parse(JSON.stringify(this.totalPlayList.slice(starIdx, endIdx)))\r\n\t\t\t\tresultList.filter(item => {\r\n\t\t\t\t\tif (item.videoIndex % 3 == 0) {\r\n\t\t\t\t\t\tthis.vodList[0].videoIndex = item.videoIndex\r\n\t\t\t\t\t} else if (item.videoIndex % 3 == 1) {\r\n\t\t\t\t\t\tthis.vodList[1].videoIndex = item.videoIndex\r\n\t\t\t\t\t} else if (item.videoIndex % 3 == 2) {\r\n\t\t\t\t\t\tthis.vodList[2].videoIndex = item.videoIndex\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.finalList = resultList\r\n\t\t\t\t// console.log(resultList)\r\n\t\t\t},\r\n\t\t\t/* swiper播放视频 */\r\n\t\t\tswiperPlay(newIndex) {\r\n\t\t\t\tthis.playOpen = false;\r\n\t\t\t\tclearInterval(this.failTime)\r\n\t\t\t\tclearInterval(this.repeatTime)\r\n\t\t\t\tthis.muteVideo(false)\r\n\t\t\t\t/* 播放新视频 */\r\n\t\t\t\tif (uni.createVideoContext('myVideo' + newIndex + this.swId, this)) {\r\n\t\t\t\t\tthis.shakePlay = false\r\n\t\t\t\t\tthis.videoPlay(newIndex);\r\n\t\t\t\t}\r\n\t\t\t\tthis.$refs['menuRef' + newIndex + ''][0].likeeffect = null; //重置点赞的显示动画条件\r\n\t\t\t},\r\n\t\t\t/* 当开始/继续播放时 */\r\n\t\t\tstartPlay(index) {\r\n\t\t\t\tif (this.vodIndex == index) {\r\n\t\t\t\t\tthis.playOpen = false;\r\n\t\t\t\t\tif (this.beforeVodInfo.rotateImgShow) {\r\n\t\t\t\t\t\tthis.palyCartoon = true; //开启旋转头像动画 \r\n\t\t\t\t\t}\r\n\t\t\t\t\tclearInterval(this.failTime)\r\n\t\t\t\t\tclearInterval(this.repeatTime)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/* 视频出现缓冲 */\r\n\t\t\tbufferVod(index) {\r\n\t\t\t\tif (this.vodList.length > 0 && this.changeIndex == this.vodIndex && !this.bufferShow && this.beforeVodInfo\r\n\t\t\t\t\t.vodPaly) {\r\n\t\t\t\t\tthis.playOpen = true;\r\n\t\t\t\t\tthis.scheduleLoad()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/* 视频播放失败 */\r\n\t\t\terrVod(index) {\r\n\t\t\t\tclearTimeout(this.playErrTime)\r\n\t\t\t\tthis.playErrTime = setTimeout(() => {\r\n\t\t\t\t\tif (this.vodList.length > 0 && this.changeIndex == this.vodIndex && !this.bufferShow && this\r\n\t\t\t\t\t\t.beforeVodInfo.vodPaly) {\r\n\t\t\t\t\t\tthis.playOpen = true;\r\n\t\t\t\t\t\tthis.palyCartoon = false\r\n\t\t\t\t\t\tthis.scheduleLoad()\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 300)\r\n\t\t\t},\r\n\t\t\t/* 播放进度变化时触发 */\r\n\t\t\ttimeupdateVod(ev, index) {\r\n\t\t\t\tif (this.vodIndex != index) return false\r\n\t\t\t\tthis.beforeVodInfo.coverOpacity = false; //隐藏视频封面\r\n\t\t\t\tif (!this.sliderDrag) { //判断拖拽完成后才触发更新，避免播放是拖拽冲突失效\r\n\t\t\t\t\tthis.videoTime = ev.detail.duration; //视频时间\r\n\t\t\t\t\tthis.sliderTime = ev.detail.currentTime; //已播放时间\r\n\t\t\t\t\tthis.sliderProgress = (ev.detail.currentTime / ev.detail.duration) * this.screenWidth; //播放进度\r\n\t\t\t\t}\r\n\t\t\t\t/* 关闭加载动画 */\r\n\t\t\t\tif (this.vodList.length > 0) {\r\n\t\t\t\t\tthis.bufferNum = ev.detail.currentTime\r\n\t\t\t\t\tthis.bufferShow = false;\r\n\t\t\t\t\tthis.beforeVodInfo.loadingShow = false;\r\n\t\t\t\t\tclearTimeout(this.bufferTime)\r\n\t\t\t\t\tclearInterval(this.failTime)\r\n\t\t\t\t\tclearInterval(this.repeatTime)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/* 显示进度加载动画 */\r\n\t\t\tscheduleLoad() {\r\n\t\t\t\tif (!this.bufferShow) {\r\n\t\t\t\t\tthis.bufferShow = true;\r\n\t\t\t\t\tthis.bufferTime = setTimeout(() => {\r\n\t\t\t\t\t\tthis.beforeVodInfo.loadingShow = true\r\n\t\t\t\t\t\tif (this.playOpen) {\r\n\t\t\t\t\t\t\tthis.vodLoad();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 2500)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/* 重新播放视频 */\r\n\t\t\tvodLoad() {\r\n\t\t\t\t/* 视频播放失败，重新播放视频 */\r\n\t\t\t\tif (this.playOpen) {\r\n\t\t\t\t\tthis.playOpen = false;\r\n\t\t\t\t\tif (this.sliderTime == 0) {\r\n\t\t\t\t\t\tuni.createVideoContext('myVideo' + this.vodIndex + this.swId, this).stop()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.failTime = setTimeout(() => {\r\n\t\t\t\t\t\tthis.playOpen = true;\r\n\t\t\t\t\t\tthis.bufferShow = false;\r\n\t\t\t\t\t\tthis.videoPlay(this.vodIndex)\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/* 视频播放结束 */\r\n\t\t\tendedVod(index) {\r\n\t\t\t\tif (this.vodIndex == index && this.nextPlay && (this.vodCurIndex + 1) < this.totalPlayList.length) {\r\n\t\t\t\t\tif (this.vodIndex < 2) {\r\n\t\t\t\t\t\tthis.vodIndex += 1\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.vodIndex = 0\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.currentIndex = this.vodIndex\r\n\t\t\t\t\t\tthis.$forceUpdate();\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 根据秒获取时间\r\n\t\t\tformatSeconds(a) {\r\n\t\t\t\tlet hh = parseInt(a / 3600);\r\n\t\t\t\tlet mm = parseInt((a - hh * 3600) / 60);\r\n\t\t\t\tif (mm < 10) mm = \"0\" + mm;\r\n\t\t\t\tlet ss = parseInt((a - hh * 3600) % 60);\r\n\t\t\t\tif (ss < 10) ss = \"0\" + ss;\r\n\t\t\t\tif (hh < 10) hh = hh == 0 ? '' : `0${hh}:`;\r\n\t\t\t\tlet length = hh + mm + \":\" + ss;\r\n\t\t\t\tif (a >= 0) {\r\n\t\t\t\t\treturn length;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn \"00:00\";\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/* 进度条滑动 */\r\n\t\t\ttouchmoveSlider(event) {\r\n\t\t\t\t// #ifndef APP-NVUE\r\n\t\t\t\tlet objclientX = event.changedTouches[0].clientX\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\tlet objclientX = event.changedTouches[0].screenX\r\n\t\t\t\t// #endif\r\n\t\t\t\tthis.sliderDrag = true; //是否在拖动进度\r\n\t\t\t\tif (objclientX >= 0 && objclientX <= (this.screenWidth - 2)) {\r\n\t\t\t\t\tclearTimeout(this.sliderEndTime)\r\n\t\t\t\t\tthis.brightSlider = true; //显示光亮的进度条\r\n\t\t\t\t\tthis.sliderProgress = objclientX\r\n\t\t\t\t\tlet num = this.sliderProgress / (this.screenWidth - 2)\r\n\t\t\t\t\tthis.sliderTime = num * this.videoTime; //滑动期间显示的时间\r\n\t\t\t\t\tthis.endTime = num * this.videoTime; //最终滑动的时间\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/* 进度条滑动结束 */\r\n\t\t\ttouchendSlider() {\r\n\t\t\t\tthis.sliderDrag = false;\r\n\t\t\t\tlet videoCtx = uni.createVideoContext('myVideo' + this.vodIndex + this.swId, this)\r\n\t\t\t\tvideoCtx.seek(this.endTime);\r\n\t\t\t\tvideoCtx.play();\r\n\t\t\t\tthis.beforeVodInfo.vodPaly = true; //开启播放\r\n\t\t\t\tthis.beforeVodInfo.pauseShow = false; //关闭暂停图标\r\n\t\t\t\tthis.sliderEndTime = setTimeout(() => {\r\n\t\t\t\t\tthis.brightSlider = false; //隐藏光亮的进度条\r\n\t\t\t\t}, 2000)\r\n\t\t\t},\r\n\t\t\t/* 触碰的坐标 */\r\n\t\t\tvodViewStart(e) {\r\n\t\t\t\t// #ifndef APP-NVUE\r\n\t\t\t\tthis.touchClientY = e.changedTouches[0].clientY\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\tthis.touchClientY = e.changedTouches[0].screenY\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\t/* 上下滑动的坐标 */\r\n\t\t\tvodViewMove(e) {\r\n\t\t\t\t// #ifndef APP-NVUE\r\n\t\t\t\tthis.moveClientY = e.changedTouches[0].clientY - this.touchClientY\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\tthis.moveClientY = e.changedTouches[0].screenY - this.touchClientY\r\n\t\t\t\t// #endif\r\n\t\t\t\t/* 是否透明进度条 */\r\n\t\t\t\tif (this.moveClientY > 0 || this.moveClientY < 0) {\r\n\t\t\t\t\tthis.moveOpacity = true\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.moveOpacity = false\r\n\t\t\t\t}\r\n\t\t\t\t/* 显示下拉刷新 */\r\n\t\t\t\tif (this.loadOpen && this.vodCurIndex == 0 && !this.refreshOpen) {\r\n\t\t\t\t\tif (this.moveClientY > 10) {\r\n\t\t\t\t\t\tthis.refreshShow = true; //显示下拉刷新\r\n\t\t\t\t\t\tif (this.moveClientY > 10 && this.moveClientY <= 60 && this.refreshShow) {\r\n\t\t\t\t\t\t\tthis.refreshOpacity = (this.moveClientY / 60)\r\n\t\t\t\t\t\t\tthis.refreshclientY = (this.moveClientY / 2)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.refreshShow = false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/* 滑动结束的坐标 */\r\n\t\t\tvodViewEnd(e) {\r\n\t\t\t\t// #ifndef APP-NVUE\r\n\t\t\t\tthis.moveClientY = e.changedTouches[0].clientY - this.touchClientY\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\tthis.moveClientY = e.changedTouches[0].screenY - this.touchClientY\r\n\t\t\t\t// #endif\r\n\t\t\t\t/* 是否透明进度条 */\r\n\t\t\t\tthis.moveOpacity = false\r\n\t\t\t\t/* 隐藏下拉刷新 */\r\n\t\t\t\tif (this.loadOpen && this.vodCurIndex == 0 && this.refreshShow) {\r\n\t\t\t\t\t/* 未达到刷新条件回弹隐藏 */\r\n\t\t\t\t\tif (this.moveClientY > 1 && this.moveClientY < 60 && !this.refreshOpen) {\r\n\t\t\t\t\t\tthis.refreshOpacity = 0\r\n\t\t\t\t\t\tthis.refreshclientY = 0\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.refreshShow = false\r\n\t\t\t\t\t\t}, 300)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t/* 达到刷新条件 */\r\n\t\t\t\t\t\tif (this.refreshOpen) return\r\n\t\t\t\t\t\tthis.refreshOpen = true;\r\n\t\t\t\t\t\tthis.$emit('refreshData')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/* 重置状态数据 */\r\n\t\t\tresetData() {\r\n\t\t\t\tthis.sliderProgress = 0; //进度条滑动层宽度\r\n\t\t\t\tthis.sliderTime = 0; //显示滑动进度条时变化的时间\r\n\t\t\t\tthis.videoTime = 0; //视频时长 时间\r\n\t\t\t\tthis.endTime = 0; //滑动进度条最终的时间\r\n\t\t\t\tthis.bufferNum = null; //显示loading加载进度的时间条件\r\n\t\t\t\tthis.bufferShow = false; //显示loading加载进度的条件\r\n\t\t\t\tthis.sliderDrag = false; //是否在拖动进度\r\n\t\t\t\tthis.brightSlider = false; //是否显示光亮的进度条\r\n\t\t\t\tthis.sliderEndTime = null; //滑动结束隐藏光亮进度条时间延迟\r\n\t\t\t},\r\n\t\t\t// 单击或双击\r\n\t\t\thandClick(event, index) {\r\n\t\t\t\tif (!this.doubleOpen) { //没有开启双击\r\n\t\t\t\t\tthis.playSpot(index)\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\t// 当前时间\r\n\t\t\t\tconst curTime = new Date().getTime();\r\n\t\t\t\t// 上次点击时间\r\n\t\t\t\tconst lastTime = this.lastTapDiffTime;\r\n\t\t\t\t// 更新上次点击时间\r\n\t\t\t\tthis.lastTapDiffTime = curTime;\r\n\t\t\t\t// 两次点击间隔小于300ms, 认为是双击\r\n\t\t\t\tconst diff = curTime - lastTime;\r\n\t\t\t\tif (diff < 300) {\r\n\t\t\t\t\t// 执行方法\r\n\t\t\t\t\t// 成功触发双击事件时，取消单击事件的执行\r\n\t\t\t\t\tclearTimeout(this.lastTapTimeoutFunc);\r\n\t\t\t\t\tif (!this.vodList[this.vodIndex].fabulousShow) {\r\n\t\t\t\t\t\tthis.$refs['menuRef' + this.vodIndex + ''][0].fabulousBtn(index); //视频点赞\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!this.doubleHeart) return //双击点赞屏幕是否显示桃心\r\n\t\t\t\t\tif (this.doubleOutTime) return\r\n\t\t\t\t\tthis.doubleOutTime = setTimeout(() => {\r\n\t\t\t\t\t\t// #ifndef APP-NVUE\r\n\t\t\t\t\t\tlet topY = event.changedTouches[0].clientY\r\n\t\t\t\t\t\tlet leftX = event.changedTouches[0].clientX\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\t\t\tlet topY = event.changedTouches[0].screenY\r\n\t\t\t\t\t\tlet leftX = event.changedTouches[0].screenX\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\tlet rotateList = ['0deg', '15deg', '-15deg']\r\n\t\t\t\t\t\tlet rNum = Math.floor(Math.random() * 3)\r\n\t\t\t\t\t\tlet likeObj = {\r\n\t\t\t\t\t\t\tid: this.likeId++,\r\n\t\t\t\t\t\t\twidth: this.pxToRpx(95) + 'rpx',\r\n\t\t\t\t\t\t\theight: this.pxToRpx(95) + 'rpx',\r\n\t\t\t\t\t\t\ttop: this.pxToRpx(topY) - this.pxToRpx(140) + 'rpx',\r\n\t\t\t\t\t\t\tleft: this.pxToRpx(leftX) - this.pxToRpx(95 / 2) + 'rpx',\r\n\t\t\t\t\t\t\trotate: rotateList[rNum],\r\n\t\t\t\t\t\t\tclassName: '',\r\n\t\t\t\t\t\t\tisShow: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.likeList.push(likeObj)\r\n\t\t\t\t\t\tthis.doubleAddClass(likeObj.id)\r\n\t\t\t\t\t\tthis.doubleOutTime = null\r\n\t\t\t\t\t\tclearTimeout(this.clearDoubleTime)\r\n\t\t\t\t\t\tthis.clearDoubleTime = setTimeout(() => {\r\n\t\t\t\t\t\t\tthis.likeList = []\r\n\t\t\t\t\t\t}, 1500)\r\n\t\t\t\t\t\tthis.$emit('doubleClick', this.vodList[this.vodIndex])\r\n\t\t\t\t\t}, 50)\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 单击事件延时300毫秒执行\r\n\t\t\t\t\tthis.lastTapTimeoutFunc = setTimeout(() => {\r\n\t\t\t\t\t\t// 执行方法\r\n\t\t\t\t\t\tthis.playSpot(index)\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/* px转换rpx */\r\n\t\t\tpxToRpx(px) {\r\n\t\t\t\treturn (750 * Number.parseInt(px)) / this.screenWidth\r\n\t\t\t},\r\n\t\t\t/* 双击点赞添加移除动画 */\r\n\t\t\tdoubleAddClass(id) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.likeList.filter((item, index) => {\r\n\t\t\t\t\t\tif (item.id == id) {\r\n\t\t\t\t\t\t\tthis.likeList[index].className = 'doubleImageRemove'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.likeList.filter((item, index) => {\r\n\t\t\t\t\t\t\tif (item.id == id) {\r\n\t\t\t\t\t\t\t\titem.isShow = false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}, 400)\r\n\t\t\t\t}, 500)\r\n\t\t\t},\r\n\t\t\t/* 长按当前视频回调 */\r\n\t\t\tlongpress(item) {\r\n\t\t\t\tthis.$emit('longpress', item)\r\n\t\t\t},\r\n\t\t\t/* 添加视频 */\r\n\t\t\taddVodData(dataList, index) {\r\n\t\t\t\tif (index >= 0) {\r\n\t\t\t\t\tlet sId = this.vodList[this.changeIndex].tsId //获取当前播放视频的id\r\n\t\t\t\t\tdataList.filter((item, i) => {\r\n\t\t\t\t\t\titem.vodPaly = false //是否播放、暂停视频\r\n\t\t\t\t\t\titem.pauseShow = false //是否显示暂停图标\r\n\t\t\t\t\t\titem.loadingShow = false //是否显示loading加载动画\r\n\t\t\t\t\t\titem.coverOpacity = item.coverShow ? true : false //是否显示封面\r\n\t\t\t\t\t\tthis.totalPlayList.splice(index + 1, 0, item);\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.totalPlayList.filter((item, idx) => {\r\n\t\t\t\t\t\titem.videoIndex = idx\r\n\t\t\t\t\t})\r\n\t\t\t\t\t/*  获取当前播放视频的下标 */\r\n\t\t\t\t\tlet currNum = 0\r\n\t\t\t\t\tthis.totalPlayList.filter((item, idx) => {\r\n\t\t\t\t\t\tif (sId == item.tsId) {\r\n\t\t\t\t\t\t\tcurrNum = idx\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.vodCurIndex = currNum\r\n\t\t\t\t\tthis.vodList[this.changeIndex].videoIndex = currNum\r\n\t\t\t\t\tthis.getFilterData(sId); //截取、筛选数据\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.lodingData(dataList); //追加在数组后面\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/* 删除视频 */\r\n\t\t\tremoveVodData(IdList) {\r\n\t\t\t\tlet sId = this.vodList[this.changeIndex].tsId //获取当前播放视频的id\r\n\t\t\t\tlet newList = this.totalPlayList.filter(item => !IdList.some(ele => ele === item.tsId))\r\n\t\t\t\tnewList.filter((item, idx) => {\r\n\t\t\t\t\titem.videoIndex = idx\r\n\t\t\t\t})\r\n\t\t\t\tthis.totalPlayList = newList\r\n\t\t\t\tif (!newList.length) { //如果视频全部删除掉\r\n\t\t\t\t\tthis.vodList = []\r\n\t\t\t\t\tthis.loadShow = false\r\n\t\t\t\t\tthis.$emit('removeAllData', this.vodList)\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tthis.beginLoad = this.totalPlayList.length\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif (this.totalPlayList.length <= 3) { //数据少于等于3条的时候\r\n\t\t\t\t\t\tthis.vodList = []\r\n\t\t\t\t\t\tthis.contentShow = false\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.currentIndex = 0\r\n\t\t\t\t\t\t\tthis.circular = false //禁止循环滑动\r\n\t\t\t\t\t\t\tthis.changeIndex = 0\r\n\t\t\t\t\t\t\tthis.vodIndex = 0\r\n\t\t\t\t\t\t\tthis.vodCurIndex = 0\r\n\t\t\t\t\t\t\tthis.vodList = newList\r\n\t\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\t\tthis.contentShow = true\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tthis.swiperPlay(this.vodIndex);\r\n\t\t\t\t\t\t\t\t}, 50)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}, 50)\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.vodCurIndex >= newList.length - 1) { //数据少于当前播放的下标\r\n\t\t\t\t\t\tlet endNum = this.totalPlayList.length - (this.totalPlayList.length % 3)\r\n\t\t\t\t\t\tthis.vodCurIndex = endNum - 1 < 0 ? 0 : endNum - 1\r\n\t\t\t\t\t\tthis.vodList[this.changeIndex].videoIndex = this.vodCurIndex\r\n\t\t\t\t\t\tthis.getFilterData(sId, 1); //截取、筛选数据\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/* 正常数据删除 */\r\n\t\t\t\t\t/*  获取当前播放视频的下标 */\r\n\t\t\t\t\tlet currNum = 0\r\n\t\t\t\t\tlet currExist = false\r\n\t\t\t\t\tthis.totalPlayList.filter((item, idx) => {\r\n\t\t\t\t\t\tif (sId == item.tsId) {\r\n\t\t\t\t\t\t\tcurrNum = idx\r\n\t\t\t\t\t\t\tcurrExist = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (currExist) { //没有删除当前播放的视频\r\n\t\t\t\t\t\tthis.vodCurIndex = currNum\r\n\t\t\t\t\t\tthis.vodList[this.changeIndex].videoIndex = currNum\r\n\t\t\t\t\t\tthis.getFilterData(sId, 1); //截取、筛选数据\r\n\t\t\t\t\t} else { //有删除当前播放的视频\r\n\t\t\t\t\t\tif (this.vodCurIndex >= newList.length - 1) {\r\n\t\t\t\t\t\t\tthis.vodCurIndex = newList.length - 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.vodList[this.changeIndex].videoIndex = this.vodCurIndex\r\n\t\t\t\t\t\tlet cId = this.totalPlayList[this.vodCurIndex].tsId //获取当前播放下标视频的id\r\n\t\t\t\t\t\tthis.getFilterData(cId, 1); //截取、筛选数据\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 30)\r\n\t\t\t},\r\n\t\t\t/* 截取、筛选数据 */\r\n\t\t\tgetFilterData(sId, play) {\r\n\t\t\t\t/* 截取要播放的视频列表 */\r\n\t\t\t\tthis.getVodSliceList()\r\n\t\t\t\tif (play) {\r\n\t\t\t\t\tthis.contentShow = false\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t/* 截取的视频数据对3求余数赋值 */\r\n\t\t\t\t\tif (play) {\r\n\t\t\t\t\t\tthis.finalList.filter(item => {\r\n\t\t\t\t\t\t\tif (item.videoIndex % 3 == 0) {\r\n\t\t\t\t\t\t\t\tthis.$set(this.vodList, 0, item)\r\n\t\t\t\t\t\t\t} else if (item.videoIndex % 3 == 1) {\r\n\t\t\t\t\t\t\t\tthis.$set(this.vodList, 1, item)\r\n\t\t\t\t\t\t\t} else if (item.videoIndex % 3 == 2) {\r\n\t\t\t\t\t\t\t\tthis.$set(this.vodList, 2, item)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.finalList.filter(item => {\r\n\t\t\t\t\t\t\tif (item.sId != sId) {\r\n\t\t\t\t\t\t\t\tif (item.videoIndex % 3 == 0) {\r\n\t\t\t\t\t\t\t\t\tthis.$set(this.vodList, 0, item)\r\n\t\t\t\t\t\t\t\t} else if (item.videoIndex % 3 == 1) {\r\n\t\t\t\t\t\t\t\t\tthis.$set(this.vodList, 1, item)\r\n\t\t\t\t\t\t\t\t} else if (item.videoIndex % 3 == 2) {\r\n\t\t\t\t\t\t\t\t\tthis.$set(this.vodList, 2, item)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet appendNum = this.totalPlayList.length - (this.totalPlayList.length % 3)\r\n\t\t\t\t\t/* 如果总视频数量对3求余数不为0，则追加剩余视频数据 */\r\n\t\t\t\t\tif (this.vodCurIndex != 0 && this.vodList.length == 3 && (this.vodCurIndex + 1) >= appendNum) {\r\n\t\t\t\t\t\tlet arrList = this.totalPlayList.slice(this.vodCurIndex + 1, this.totalPlayList.length)\r\n\t\t\t\t\t\tarrList.filter(item => {\r\n\t\t\t\t\t\t\tthis.vodList.push(item)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (play) {\r\n\t\t\t\t\t\tthis.durationNum = 0\r\n\t\t\t\t\t\tthis.contentShow = true\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tlet endNum = this.totalPlayList.length - (this.totalPlayList.length % 3)\r\n\t\t\t\t\t\tif (this.vodCurIndex == 0 || (this.vodCurIndex + 1) >= endNum) {\r\n\t\t\t\t\t\t\tthis.circular = false\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.circular = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (play) {\r\n\t\t\t\t\t\t\tlet currentNum = 0\r\n\t\t\t\t\t\t\tthis.vodList.filter((item, index) => {\r\n\t\t\t\t\t\t\t\tif (item.tsId == sId) {\r\n\t\t\t\t\t\t\t\t\tcurrentNum = index\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tconsole.log('=========>', currentNum)\r\n\t\t\t\t\t\t\tthis.currentIndex = currentNum\r\n\t\t\t\t\t\t\tthis.vodIndex = currentNum\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tthis.swiperPlay(this.vodIndex);\r\n\t\t\t\t\t\t\t\tthis.durationNum = 300\r\n\t\t\t\t\t\t\t\t/* 到底加载数据 */\r\n\t\t\t\t\t\t\t\tif ((this.vodCurIndex + 1) >= this.totalPlayList.length - this\r\n\t\t\t\t\t\t\t\t\t.totalPlayList.length % 3 && !this.loadStart) {\r\n\t\t\t\t\t\t\t\t\tclearTimeout(this.loadTime)\r\n\t\t\t\t\t\t\t\t\tthis.loadTime = setTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\tthis.$emit('lodData')\r\n\t\t\t\t\t\t\t\t\t}, 300)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, 100)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 50)\r\n\t\t\t},\r\n\t\t\t/* 点赞关注操作 */\r\n\t\t\thandleInfo(obj) {\r\n\t\t\t\tthis.totalPlayList.filter((item, index) => {\r\n\t\t\t\t\tif (item.videoIndex == obj.videoIndex) {\r\n\t\t\t\t\t\tthis.$set(this.totalPlayList, index, obj)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.vodList.filter((item, index) => {\r\n\t\t\t\t\tif (item.videoIndex == obj.videoIndex) {\r\n\t\t\t\t\t\tthis.$set(this.vodList, index, obj)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.page {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.contentBox {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.shade-swiper {\r\n\t\tposition: absolute;\r\n\t\tpointer-events: none;\r\n\t\topacity: 0;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tz-index: 99;\r\n\t}\r\n\r\n\t.swiperBox {\r\n\t\tposition: relative;\r\n\t\tz-index: 2;\r\n\t}\r\n\r\n\t.box {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.vodLayer {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tz-index: 1;\r\n\t\tbackground-color: #000000;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.vodLayer-img {\r\n\t\twidth: 150rpx;\r\n\t\theight: 150rpx;\r\n\t\topacity: 0.8;\r\n\t}\r\n\r\n\t.cover-img {\r\n\t\twidth: 750rpx;\r\n\t\theight: auto;\r\n\t}\r\n\r\n\t.vodPlayer {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 2;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.vodPlayView {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.1);\r\n\t\tz-index: 7;\r\n\t}\r\n\r\n\t.vodPause-img {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.1);\r\n\t\tz-index: 4;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.vodPauseImage {\r\n\t\twidth: 134rpx;\r\n\t\theight: 134rpx;\r\n\t\topacity: 0.35;\r\n\t\tanimation: vodPauseName 0.1s linear forwards;\r\n\t}\r\n\r\n\t@keyframes vodPauseName {\r\n\t\t0% {\r\n\t\t\ttransform: scale(2);\r\n\t\t\topacity: 0;\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\ttransform: scale(1);\r\n\t\t\topacity: 0.35;\r\n\t\t}\r\n\t}\r\n\r\n\t/* loading动画 */\r\n\t.loadingView {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tz-index: 100;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackground-color: #000000;\r\n\t}\r\n\r\n\t.k-ball7a {\r\n\t\tborder: 0;\r\n\t\tmargin: 0;\r\n\t\twidth: 25rpx;\r\n\t\theight: 25rpx;\r\n\t\tposition: absolute;\r\n\t\tborder-radius: 50%;\r\n\t\tanimation: k-loadingO 2s ease infinite;\r\n\t\tbackground: #4CD964;\r\n\t\tanimation-delay: -1.5s\r\n\t}\r\n\r\n\t.k-ball7b {\r\n\t\tborder: 0;\r\n\t\tmargin: 0;\r\n\t\twidth: 25rpx;\r\n\t\theight: 25rpx;\r\n\t\tposition: absolute;\r\n\t\tborder-radius: 50%;\r\n\t\tanimation: k-loadingO 2s ease infinite;\r\n\t\tbackground: #F63D3A;\r\n\t\tanimation-delay: -1s\r\n\t}\r\n\r\n\t.k-ball7c {\r\n\t\tborder: 0;\r\n\t\tmargin: 0;\r\n\t\twidth: 25rpx;\r\n\t\theight: 25rpx;\r\n\t\tposition: absolute;\r\n\t\tborder-radius: 50%;\r\n\t\tanimation: k-loadingO 2s ease infinite;\r\n\t\tbackground: #FDA543;\r\n\t\tanimation-delay: -0.5s\r\n\t}\r\n\r\n\t.k-ball7d {\r\n\t\tborder: 0;\r\n\t\tmargin: 0;\r\n\t\twidth: 25rpx;\r\n\t\theight: 25rpx;\r\n\t\tposition: absolute;\r\n\t\tborder-radius: 50%;\r\n\t\tanimation: k-loadingO 2s ease infinite;\r\n\t\tbackground: #5C6BC0\r\n\t}\r\n\r\n\t.k-paused {\r\n\t\tanimation-play-state: paused;\r\n\t}\r\n\r\n\t.k-running {\r\n\t\tanimation-play-state: running;\r\n\t}\r\n\r\n\t@keyframes k-loadingO {\r\n\r\n\t\t0%,\r\n\t\t100% {\r\n\t\t\ttransform: translate(0)\r\n\t\t}\r\n\r\n\t\t25% {\r\n\t\t\ttransform: translate(160%)\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\ttransform: translate(160%, 160%)\r\n\t\t}\r\n\r\n\t\t75% {\r\n\t\t\ttransform: translate(0, 160%)\r\n\t\t}\r\n\t}\r\n\r\n\t/* 进度条 */\r\n\t.flooter {\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 1100;\r\n\t\ttransition: all 0.3s linear;\r\n\t}\r\n\r\n\t.sliderBox {\r\n\t\tposition: relative;\r\n\t\tmin-height: 18px;\r\n\t\twidth: 750rpx;\r\n\t}\r\n\r\n\t.slider-item {\r\n\t\twidth: 750rpx;\r\n\t\tmin-height: 2px;\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.slider-box {\r\n\t\theight: 2px;\r\n\t\tbackground-color: #C8C7CC;\r\n\t\topacity: 0.2;\r\n\t\tborder-radius: 2px;\r\n\t}\r\n\r\n\t.slider-block {\r\n\t\tposition: absolute;\r\n\t\twidth: 5px;\r\n\t\theight: 5px;\r\n\t\tborder-radius: 5px;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\ttop: -1px;\r\n\t\tleft: 0;\r\n\t\tz-index: 3;\r\n\t\topacity: 0.5;\r\n\t}\r\n\r\n\t.slider-load {\r\n\t\tposition: absolute;\r\n\t\twidth: 100%;\r\n\t\tbottom: 0;\r\n\t\theight: 2px;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\topacity: 0.4;\r\n\t\tz-index: 3;\r\n\t\tborder-radius: 2px;\r\n\t\ttransition: all 0.02s linear;\r\n\t}\r\n\r\n\t.slider-box-active {\r\n\t\tposition: absolute;\r\n\t\twidth: 100%;\r\n\t\tbottom: 0;\r\n\t\theight: 7px;\r\n\t\tbackground-color: #C8C7CC;\r\n\t\topacity: 0.4;\r\n\t\tborder-radius: 7px;\r\n\t\ttransition: height 0.2s linear;\r\n\t}\r\n\r\n\t.slider-block-active {\r\n\t\tposition: absolute;\r\n\t\ttop: 8px;\r\n\t\twidth: 15px;\r\n\t\theight: 15px;\r\n\t\tborder-radius: 15px;\r\n\t\topacity: 1;\r\n\t\tleft: -3px;\r\n\t\tbackground-color: #FFFFFF;\r\n\t}\r\n\r\n\t.slider-load-active {\r\n\t\twidth: 100%;\r\n\t\topacity: 1;\r\n\t\theight: 7px;\r\n\t\tborder-radius: 7px;\r\n\t\ttransition: height 0.2s linear;\r\n\t}\r\n\r\n\t.sliderData {\r\n\t\twidth: 750rpx;\r\n\t\theight: 200rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tcolor: #FFFFFF;\r\n\t\tfont-size: 50rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.slider-text {\r\n\t\tflex-direction: row;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t/* 下拉刷新 */\r\n\t.refresh {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\tz-index: 15;\r\n\t}\r\n\r\n\t.refreshBox {\r\n\t\theight: 100rpx;\r\n\t\tcolor: #FFFFFF;\r\n\t\tfont-size: 33rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 0 30rpx;\r\n\t\t/* transform: translateY(-30px); */\r\n\t\ttransition: all 0.01s linear;\r\n\t\topacity: 0;\r\n\t}\r\n\r\n\t.pullup {\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\t\tz-index: 1;\r\n\t\theight: 200rpx;\r\n\t\topacity: 1;\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.loadSlider {\r\n\t\tposition: absolute;\r\n\t\tbottom: 0px;\r\n\t\twidth: 750rpx;\r\n\t\theight: 2px;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.loading-slider {\r\n\t\twidth: 750rpx;\r\n\t\theight: 2px;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\topacity: 0.6;\r\n\t\tanimation: sliderName 0.4s linear infinite;\r\n\t}\r\n\r\n\t@keyframes sliderName {\r\n\t\t0% {\r\n\t\t\topacity: 0.9;\r\n\t\t\ttransform: scale(0.4);\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\topacity: 0.1;\r\n\t\t\ttransform: scale(1);\r\n\t\t}\r\n\t}\r\n\r\n\t.doubleImage {\r\n\t\tpointer-events: none;\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 20;\r\n\t\t/* width: 170rpx;\r\n\t\theight: 170rpx; */\r\n\t\tanimation: doubleName 0.3s linear forwards;\r\n\t\ttransform: scale(0);\r\n\t\topacity: 0;\r\n\t}\r\n\r\n\t@keyframes doubleName {\r\n\t\t0% {\r\n\t\t\ttransform: scale(1.6);\r\n\t\t\topacity: 0.8;\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\ttransform: scale(1);\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\r\n\t\t75% {\r\n\t\t\ttransform: scale(1.02);\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\ttransform: scale(1);\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t}\r\n\r\n\t.doubleImageRemove {\r\n\t\tanimation: doubleRemove 0.4s linear forwards;\r\n\t}\r\n\r\n\t@keyframes doubleRemove {\r\n\t\t0% {\r\n\t\t\ttransform: scale(1) translateY(0rpx);\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\ttransform: scale(1.35) translateY(-50rpx);\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\ttransform: scale(1.8) translateY(-100rpx);\r\n\t\t\topacity: 0;\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./video-v.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./video-v.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1728544763071\n      var cssReload = require(\"D:/下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}